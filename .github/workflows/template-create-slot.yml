name: Promote staging to prod
on:
  workflow_call:
    inputs:
      SLOT_NAME:
        type: string
        required: true
    secrets:
      AZURE_CREDENTIALS:
        required: true

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:

    - name: Log into Azure CLI with service principal
      uses: azure/login@v1.1
      with:
        creds: ${{ secrets.AZURE_CREDENTIALS }}

    - name: Create slot
      run: |
        az webapp deployment slot create \
          --slot ${{ inputs.SLOT_NAME }} \
          --name ssw-website-v3 \
          --resource-group ssw-website
